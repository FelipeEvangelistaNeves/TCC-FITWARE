create table produtos(
	pd_id serial primary key,
	pd_nome varchar(120) not null,
	pd_valor int not null,
	pd_descricao varchar(200)
);

create table desafios(
	de_id serial primary key,
	de_nome varchar(80) not null,
	de_descricao varchar(150),
	de_pontos int not null,
	de_tag varchar(60) not null,
	de_progresso int not null,
	de_start timestamp not null,
	de_end timestamp not null
);

create table pagamentos(
	pa_id serial primary key,
	pa_al_id int not null,
	pa_valor decimal(6,2) not null,
	pa_metodo char(1) not null,
	pa_status varchar(20) not null,
	pa_data date not null
);

create table alunos(
	al_id serial primary key,
	al_nome varchar(120) not null,
	al_email varchar(120) not null,
	al_senha varchar(60) not null,
	al_cpf varchar(11) not null,
	al_telefone varchar(11),
	al_dtnasc date not null,
	al_pontos int not null
);

create table modalidades(
	mo_id serial primary key, 
	mo_nome varchar(30) not null,
	mo_descricao varchar(200) 
);

create table horarios(
	hor_id serial primary key, 
	hor_start time not null,
	hor_end time not null,
	hor_dia varchar(7) not null
);

create table turmas(
	tu_id serial primary key, 
	tu_nome varchar(50) not null,
	tu_prof_id int not null, 
	tu_mod_id int not null,
	tu_hor_id int not null
);

create table alunos_turmas (
	al_id int references alunos(al_id) on delete cascade,
	tu_id int references turmas(tu_id) on delete cascade,
	primary key (al_id, tu_id)
);

create table funcionarios(
	fu_id serial primary key, 
	fu_nome varchar(120) not null,
	fu_email varchar(120) not null,
	fu_senha varchar(60) not null,
	fu_cpf varchar(11) not null,
	fu_telefone varchar(11) not null,
	fu_dtnasc date not null,
	fu_cargo varchar(50) not null,
	fu_cref varchar(13)
);

create table treinos(
	tr_id serial primary key,
	tr_prof_id int not null, 
	tr_nome varchar(80) not null,
	tr_descricao varchar(150),
	tr_repeticoes varchar(4) 
);

create table exercicios(
	ex_id serial primary key,
	ex_nome varchar(80) not null,
	ex_instrucao varchar(150),
	ex_video varchar(300)
);

create table treinos_exercicios (
	tr_id int references treinos(tr_id) on delete cascade,
	ex_id int references exercicios(ex_id) on delete cascade,
	primary key (tr_id, ex_id)
);